**Бизнес требования:**

| Стейкхолдер                                    | Бизнес требование                                                                                                            |
| ---------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| Мастер                                         | Оптимизировать процесс заполнения формы заказ-наряд                                                                          |
|                                                | Возможность планирования работ для предотвращения срыва сроков                                                               |
|                                                | Возможность отслеживания наличия запчастей и расходных материалов на складе мастерской                                       |
| Менеджер                                       | Оптимизировать процесс заполнения отчетности учета движения и расхода запасных частей                                        |
|                                                | Наладить коммуникацю со складом для поставки запчастей                                                                       |
|                                                | Предоставить возможность анализа остатков запчастей и материалов<br>на складе мастероской для пронозирования будущих закупок |
|                                                | Возможность отслеживания наличия запчастей на складах соседних мастерских<br>и оперативного взаимодействия друг с другом     |
|                                                | Оптимизировать процесс заполнения отчетности учета времени мастеров,<br>и количество/виды проделанных работ по машинам       |
| Финансовый директор<br>холдинга автомастерских | Структурировать отчетность для эффективного мониторинга основных показателей и метрик<br>по всем департаментам               |


**Контекстная диаграмма:**

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_BASIC/2.%20БТ_Контекстная_диаграмма/Контекстная%20диаграмма.png)


**Матрица трассировки для всех требований проекта**

| Стейкхолдер        | Бизнес-требование                                                        | Проблемы (трудность, которую мы выявили)                                                                  | Потребности (чему препятствует проблема)                          | Требования к системе (в системе должно быть...)                                                                                       | Приоритет |
| ------------------ | ------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------- | --------- |
| IT директор        | Перевести складские процессы в электронный вид<br>для увеличения прибыли | Информация по всем направлениям<br>не структурирована, хранится в разных форматах                         | получение структурированной информации                            | Хранить большой обьем данных                                                                                                          | 1         |
|                    |                                                                          |                                                                                                           |                                                                   | Возможность разграничивать роли и доступ                                                                                              | 2         |
|                    |                                                                          |                                                                                                           |                                                                   | Выгружать отчеты на основе введенных данных                                                                                           | 1         |
|                    |                                                                          | Проблемы со связью                                                                                        | Постоянный доступ к системе                                       | Система должна постоянно работать в режиме real-time<br>и в случае сбоев уведомлять пользователя                                      | 1         |
| Менеджер СТО       | Перевести складские процессы в электронный вид<br>для увеличения прибыли | Нет актуальной информировании по наличию З/Ч от склада.                                                   | <br>Оперативное получение информации о наличии З/Ч на складе.     | Единый справочник З/Ч                                                                                                                 | 1         |
|                    |                                                                          | Информация не структурирована, хранится в разных форматах,<br>невозможность формирования отчетности.      | Быстрое получение отчетности.                                     | Выгружать отчеты на основе введенных данных                                                                                           | 1         |
|                    |                                                                          |                                                                                                           | Быстро и корректно сформировать Заказ-наряд.                      | Единый справочник выполняемых работ и мастеров                                                                                        | 1         |
|                    | Перевести складские процессы в электронный вид<br>для увеличения прибыли | Проблемы со своевременной поставкой запчастей<br>(недостаток, долгий срок поставки) с центральным складом | Своевременное корректное формирование заказа в системе            | возможность видеть остатки на складе                                                                                                  | 1         |
|                    |                                                                          |                                                                                                           | Видеть статус заказа                                              | Отображение в системе состояния и сроков доставки заказа с цс                                                                         | 1         |
|                    |                                                                          |                                                                                                           | ускорить сроки доставки заказа                                    | Возможность передать заказ на запчасти на склад                                                                                       | 1         |
|                    |                                                                          | Некорректное заполнение фактуры                                                                           | Исключить ошибки человеческого фактора<br>при формировании заказа | Единая форма заказа запчастей и расходников                                                                                           | 1         |
|                    |                                                                          |                                                                                                           |                                                                   | Автозаполнение из классификаторов и каталогов                                                                                         | 2         |
| Мастер СТО         | Перевести складские процессы в электронный вид<br>для увеличения прибыли | Нет актуальной информации по наличию З/Ч                                                                  | Корректная информация о запчастях                                 | Возможность отслеживания наличия запчастей и расходных<br>материалов на складе мастерской                                             | 1         |
|                    |                                                                          | Нет времени на заполнение заказа-наряд                                                                    | Оптимизировать процесс заполнения формы заказ-наряд               | Cистема должна интегрироваться с планшетами мастеров,<br>в которых должен быть user-friendly интерфейс для быстрого заполнения заявки | 1         |
|                    |                                                                          | Нет точной информации по работам                                                                          | Актуальная информация по работам                                  | Система должна отображать список работ, затраченное время и статус                                                                    | 2         |


**ER диаграмма:**

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_BASIC/4.%20ER_диаграмма/ER_диаграмма.png)

**Описание сущностей**

| Сущность          | Описание сущности              | Атрибут           | Описание атрибута                   |
| ----------------- | ------------------------------ | ----------------- | ----------------------------------- |
| order             | Заказ-наряд                    | order_id          | Идентификатор заказа-наряда         |
|                   |                                | client_id         | Идентификатор клиента               |
|                   |                                | car_id            | Идентификатор авто                  |
|                   |                                | workshop_id       | Идентификатор мастерской/СТО        |
|                   |                                | status            | Статус заказа-наряда                |
|                   |                                | date              | Дата оформления                     |
| order_items_count | Список запчастей в заказ-наряд | order_id          | Идентификатор заказа-наряда         |
|                   |                                | item_id           | Идентификатор запчастей             |
|                   |                                | count             | Кол-во запчастей                    |
| items_count       | Кол-во запчастей на складах    | item_id           | Идентификатор запчасти              |
|                   |                                | storage_id        | Идентификатор склада                |
|                   |                                | count             | Кол-во запчастей                    |
|                   |                                | date_start        | Дата начала записи                  |
|                   |                                | date_end          | Дата конца записи                   |
| dim_items         | Справочник запчастей           | item_id           | Идентификатор детали                |
|                   |                                | item_name         | Наименование детали                 |
| dim_storage       | Справочник складов             | storage_id        | Идентификатор склада                |
|                   |                                | type              | Тип склада                          |
|                   |                                | storage_location  | Адрес склада                        |
| dim_workshop      | Справочник Мастерских/СТО      | workshop_id       | Идентификатор мастерской/СТО        |
|                   |                                | type              | Тип (мастерская/СТО)                |
|                   |                                | workshop_location | Адрес мастерской/СТО                |
|                   |                                | storage_id        | Идентификатор склада                |
| dim_client        | Справочник клиентов            | client_id         | Идентификатор клиента               |
|                   |                                | first_name        | Имя                                 |
|                   |                                | last_name         | Фамилия                             |
| dim_car           | Справочник авто                | car_id            | Идентификатор авто                  |
|                   |                                | client_id         | Идентификатор клиента               |
|                   |                                | mark              | Марка авто                          |
|                   |                                | model             | Модель авто                         |
|                   |                                | year              | Год выпуска авто                    |
|                   |                                | gos_number        | Гос-номер авто                      |
| order_work_time   | Учет времени работ сотрудников | order_id          | Идентификатор заказа-наряда         |
|                   |                                | employee_id       | Идентификатор сотрудника            |
|                   |                                | work_type_id      | Идентификатор типа работ            |
|                   |                                | timestamp_start   | Время начала работ                  |
|                   |                                | timestamp_end     | Время окончания работ               |
|                   |                                | status            | Статус работ                        |
| dim_work_type     | Справочник типов работ         | work_type_id      | Идентификатор типа работ            |
|                   |                                | work_type         | Наименование типа работ             |
| order_work_type   | Типы работ в заказ-наряд       | work_type_id      | Идентификатор типа работ            |
|                   |                                | order_id          | Идентификатор заказа-наряда         |
| order_employee    | Сотрудники заказа-наряда       | order_id          | Идентификатор заказа-наряда         |
|                   |                                | employee_id       | Идентификатор сотрудника            |
| dim_employee      | Справочник сотрудников         | employee_id       | Идентификатор сотрудника            |
|                   |                                | work_location_id  | Идентификатор места работы          |
|                   |                                | rank_id           | Идентификатор ранга (специальность) |
|                   |                                | date_start        | Дата зачисления в штат              |
|                   |                                | date_end          | Дата увольнения                     |
|                   |                                | first_name        | Имя                                 |
|                   |                                | last_name         | Фамилия                             |
| dim_rank          | Справочник специальностей      | rank_id           | Идентификатор ранга (специальность) |
|                   |                                | rank_name         | Наименование специальности          |


**Связи**

| Сущность_1        | Ключ связи                   | Сущность_2        | Тип связи |
| ----------------- | ---------------------------- | ----------------- | --------- |
| order             | order_id                     | order_items_count | 1:M       |
| order             | order_id                     | order_work_time   | 1:M       |
| order             | order_id                     | order_work_type   | 1:M       |
| order             | order_id                     | order_employee    | 1:M       |
| order_work_time   | employee_id                  | dim_employee      | M:1       |
| order_work_time   | work_type_id                 | dim_work_type     | M:1       |
| dim_work_type     | work_type_id                 | order_work_type   | 1:M       |
| order_employee    | employee_id                  | dim_employee      | M:1       |
| dim_employee      | rank_id                      | dim_rank          | M:1       |
| order_items_count | item_id                      | items_count       | M:M       |
| items_count       | item_id                      | dim_items         | M:1       |
| items_count       | storage_id                   | dim_storage       | M:1       |
| dim_storage       | storage_id                   | dim_workshop      | 1:1       |
| dim_workshop      | workshop_id                  | order             | 1:M       |
| dim_client        | client_id                    | order             | 1:M       |
| dim_client        | client_id                    | dim_car           | 1:M       |
| dim_car           | car_id                       | order             | 1:M       |
| dim_employee      | work_location_id:storage_id  | dim_storage       | 1:1       |
| dim_employee      | work_location_id:workshop_id | dim_workshop      | 1:1       |

**EPC бизнес процессов «Оформление авто»:**

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_BASIC/5.%20eEPC_%20BPMN_%20Activity_Diagram/EPC_%D0%BE%D1%84%D0%BE%D1%80%D0%BC%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B0%D0%B2%D1%82%D0%BE.png)

**BPMN бизнес процессов «Обслужить авто»:**

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_BASIC/5.%20eEPC_%20BPMN_%20Activity_Diagram/bpmn_%D0%BE%D0%B1%D1%81%D0%BB%D1%83%D0%B6%D0%B8%D1%82%D1%8C_%D0%B0%D0%B2%D1%82%D0%BE.png)

**Use Case диаграмма** 

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_BASIC/6.%20Use%20case/usecase_crm_drawio.png)

**Название** : Создать заказ-наряд

**Область действия:** Менеджер – система

**Уровень цели:** цель пользователя

**Основное действующее лицо:** Менеджер

**Участники и интересы:**

- Руководство – загрузить рем зону, получить выгоду (вести учет ресурсов материальных, трудовых)
- Менеджер – получить корректную информацию о работе, стоимости, расписанию мастеров
- Клиент – проверить работы, получить стоимость ремонта

**Предусловие:** регистрация клиента

**Мин гарантии:** регистрация обращения клиента, минимальный список работ и запчастей

**Гарантии успеха:** все данные внесены, з\н создан

**Основной сценарий:**

1. Менеджер запускает функцию создания з\н
2. Система открывает экранную форму ввода следующих данных: тел., ФИО
3. Менеджер поочередно вводит данные клиента (тел и ФИО) в поля с контекстным поиском (в соотв. с треб. к контекстн. поиску)
4. Система подтверждает корректность данных клиента и предлагает список привязанных к клиенту авто
5. Менеджер выбирает авто
6. Система подтверждает корректность данных
7. Менеджер вносит перечень работ
8. Система возвращает список возможных мастеров
9. Менеджер выбирает мастера по ремонту
10. Менеджер вносит перечень запчастей
11. Система подтверждает корректность данных
12. Система рассчитывает стоимость запчастей и работ
13. Система автоматически сохраняет корректно введенные данные.

**Расширения**

3.1. Менеджер не находит клиента в контекстном поиске

    3.1.1. Менеджер выполняет сценарий зарегистрировать клиента

    3.1.2. Менеджер повторно вводит данные зарегистрированного клиента

3.2. Менеджер находит не все данные клиента в контекстном поиске

    3.2.1. Менеджер обновляет данные клиента в система

    3.2.2. Менеджер повторно вводит обновленные данные клиента

4.1. Система оповещает об ошибке введенных данных клиента

    4.1.1. Менеджер повторно вводит данные клиента исправив указанную ошибку

5.1. Менеджер не находит необходимый авто клиента

    5.1.1. Менеджер обновляет данные клиента в система

    5.1.2. Менеджер повторно выбирает необходимый авто клиента

6.1. Система оповещает о невозможности обслуживания авто данной марки и предлагает список других СТО/автомастерских и менеджер передает информацию клиенту

    6.1.1. Клиент соглашается провести работы в другом СТО/автомастерской

        6.1.1.1. Менеджер инициирует сценарий передачи заявки в другое СТО/автомастерскую

    6.1.2. Клиент отказывается от услуг

        6.1.2.1. Менеджер собирает обратную связь

        6.1.2.2. Менеджер инициирует сценарий работы с отказами

8.1. Система оповещает о невозможности проведения необходимых работ и предлагает список других СТО/автомастерских и менеджер передает информацию клиенту

    8.1.1. Клиент соглашается провести работы в другом СТО/автомастерской

        8.1.1.1. Менеджер инициирует сценарий передачи заявки в другое СТО/автомастерскую

    8.1.2. Клиент отказывается от услуг

        8.1.2.1. Менеджер собирает обратную связь

        8.1.2.2. Менеджер инициирует сценарий работы с отказами

11.1. Система указывает каких запчастей нет в наличии на локальном складе и предлагает менеджеру отправить запрос на центральный склад

    11.1.1. Менеджер заполняет заявку для запроса запчастей и отправляет ее на центральный склад





**Название** : Записать клиента

**Область действия:** Менеджер – система

**Уровень цели:** цель пользователя

**Основное действующее лицо:** Менеджер

**Участники и интересы:**

- Руководство – загрузить рем зону, получить выгоду (привлечь новых клиентов или удержать старых)
- Менеджер – получить корректную информацию о доступных работах, расписанию мастеров, зарегистрировать клиента на определенную дату
- Клиент – Запланировать проведения работ по авто

**Предусловие:** регистрация клиента

**Мин гарантии:** регистрация обращения клиента

**Гарантии успеха:** все данные внесены, запись клиента создана

**Основной сценарий:**

1. Менеджер запускает функцию записи клиента
2. Система открывает экранную форму ввода следующих данных: тел., ФИО
3. Менеджер поочередно вводит данные клиента (тел и ФИО) в поля с контекстным поиском (в соотв. с треб. к контекстн. поиску)
4. Система подтверждает корректность данных клиента и предлагает список привязанных к клиенту авто
5. Менеджер выбирает авто
6. Система подтверждает корректность данных
7. Менеджер выбирает цель записи клиента из выпадающего списка, который предоставляет система
8. Система подтверждает корректность данных
9. Система возвращает календарь свободных слотов для записи и список возможных мастеров
10. Менеджер выбирает свободную дату и мастера по ремонту
11. Система подтверждает корректность данных и регистрирует запись клиента

**Расширения**

3.1. Менеджер не находит клиента в контекстном поиске

    3.1.1. Менеджер выполняет сценарий зарегистрировать клиента

    3.1.2. Менеджер повторно вводит данные зарегистрированного клиента

3.2. Менеджер находит не все данные клиента в контекстном поиске

    3.2.1. Менеджер обновляет данные клиента в система

    3.2.2. Менеджер повторно вводит обновленные данные клиента

4.1. Система оповещает об ошибке введенных данных клиента

    4.1.1. Менеджер повторно вводит данные клиента исправив указанную ошибку

5.1. Менеджер не находит необходимый авто клиента

    5.1.1. Менеджер обновляет данные клиента в система

    5.1.2. Менеджер повторно выбирает необходимый авто клиента

6.1. Система оповещает о невозможности обслуживания авто данной марки и предлагает список других СТО/автомастерских и менеджер передает информацию клиенту

    6.1.1. Клиент соглашается провести работы в другом СТО/автомастерской

        6.1.1.1. Менеджер инициирует сценарий передачи заявки в другое СТО/автомастерскую

    6.1.2. Клиент отказывается от услуг

        6.1.2.1. Менеджер собирает обратную связь

        6.1.2.2. Менеджер инициирует сценарий работы с отказами
        
10.1. Клиенту не подходят доступные даты и он отказывается от услуг

    10.1.1 Мастер инициирует сценарий работа с отказами.


**Dialog flow** 

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_BASIC/7.%20Dialog%20Flow%20%2B%20Screen%20Flow/Карта%20диалогов.png)

**Контактные данные клиента** 

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_BASIC/7.%20Dialog%20Flow%20%2B%20Screen%20Flow/Контактные%20данные%20клиента.png)

**Форма выбора марки и модели авто** 

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_BASIC/7.%20Dialog%20Flow%20%2B%20Screen%20Flow/Форма%20выбора%20марки%20и%20модели.png)

**Форма ввода данных авто** 

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_BASIC/7.%20Dialog%20Flow%20%2B%20Screen%20Flow/Форма%20ввода%20данных%20авто.png)

**User Story** 

 - [Miro (полная версия)](https://miro.com/app/board/uXjVM7LwBGg=/?share_link_id=579873918829)

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_BASIC/Проект/usmiro.png)

**Backlog** 

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_BASIC/Проект/bl1.png)

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_BASIC/Проект/bl3.png)

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_BASIC/Проект/bl4.png)


**Диаграмма: классов**

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_BASIC/9.%20Диаграмма%20классов/ооп.drawio.png)

**Описание сущностей**

| Сущность       | Наименование                                                                                    |
| -------------- | ----------------------------------------------------------------------------------------------- |
| client         | Клиент                                                                                          |
| Атрибуты       | Наименование                                                                                    |
| client_id      | Идентификатор клиента                                                                           |
| FIO            | ФИО клиента                                                                                     |
| driver_number  | номер вод. Удостоверения                                                                        |
| tel            | номер телефона                                                                                  |
| Методы         | Зарегистрировать клиента<br>Изменить данные клиента                                             |
| Сущность       | Наименование                                                                                    |
| Auto           | автомобиль клиента                                                                              |
| Атрибуты       | Наименование                                                                                    |
| auto_id        | Идентификатор авто                                                                              |
| client_id      | Идентификатор клиента                                                                           |
| reg_number     | рег. Номер                                                                                      |
|  VIN           | ВИН                                                                                             |
| Методы         | Закрепить авто за клиентом<br>Изменить данные авто                                              |
| Сущность       | Наименование                                                                                    |
| appointment    | Записи                                                                                          |
| Атрибуты       | Наименование                                                                                    |
| appointment_id | Идентификатор записи                                                                            |
| client_id      | Идентификатор клиента                                                                           |
| STO_id         | Идентификатор СТО                                                                               |
| date           | Дата записи                                                                                     |
| comment        | Комментарий                                                                                     |
| status         | Статус записи                                                                                   |
| Методы         | Записать клиента на прием<br>Описать первичную проблему<br>Отменить запись                      |
| Сущность       | Наименование                                                                                    |
| STO            | Справочник СТО                                                                                  |
| Атрибуты       | Наименование                                                                                    |
| STO_id         | Идентификатор СТО                                                                               |
| address        | Адрес СТО                                                                                       |
| tel            | Телефон СТО                                                                                     |
| Методы         | Зарегистрировать новое СТО<br>Изменить данные СТО                                               |
| Сущность       | Наименование                                                                                    |
| order          | Заказ наряд                                                                                     |
| Атрибуты       | Наименование                                                                                    |
| order_id       | Идентификатор заказ наряд                                                                       |
| auto_id        | Идентификатор авто                                                                              |
| STO_id         | Идентификатор СТО                                                                               |
| master_id      | Идентификатор Мастера                                                                           |
| date           | Дата заказа наряд                                                                               |
| status         | Статус заказ наряд                                                                              |
| Методы         | Создать заказ наряд<br>Выбрать мастера для ремонта<br>Изменить статус заказ наряд               |
| Сущность       | Наименование                                                                                    |
| master         | Справочник мастеров                                                                             |
| Атрибуты       | Наименование                                                                                    |
| master_id      | Идентификатор Мастера                                                                           |
| FIO            | ФИО мастера                                                                                     |
| STO_id         | Идентификатор СТО                                                                               |
| type           | Тип мастера                                                                                     |
| Методы         | Зарегистрировать нового мастера<br>Изменить данные мастера                                      |
| Сущность       | Наименование                                                                                    |
| master_works   | Справочник работ, которые мастер прводит                                                        |
| Атрибуты       | Наименование                                                                                    |
| master_id      | Идентификатор Мастера                                                                           |
| work_type_id   | Идентификатор работ                                                                             |
| Методы         | Добавить работы которые мастер может проводить<br>Удалить работы которые мастер может проводить |
| Сущность       | Наименование                                                                                    |
| works          | Справочник работ                                                                                |
| Атрибуты       | Наименование                                                                                    |
| work_type_id   | Идентификатор работ                                                                             |
| work_type_name | Наименование работ                                                                              |
| Методы         | Добавить работы<br>Изменить работы                                                              |
| Сущность       | Наименование                                                                                    |
| order_works    | Работы заказ наряд                                                                              |
| Атрибуты       | Наименование                                                                                    |
| order_id       | Идентификатор заказ наряд                                                                       |
| work_type_id   | Идентификатор работ                                                                             |
| Методы         | Добавить работы в заказ наряд<br>Удалить работы из заказ наряд                                  |


**Связи**

| Сущность 1   | Ключ Связи   | Сущность 2   | Вид связи |
| ------------ | ------------ | ------------ | --------- |
| auto         | client_id    | client       | м:1       |
|              | auto_id      | order        | 1:м       |
| client       | client_id    | auto         | 1:м       |
|              | client_id    | appointment  | 1:м       |
| appointment  | client_id    | client       | м:1       |
|              | STO_id       | STO          | м:1       |
| STO          | STO_id       | appointment  | 1:м       |
|              | STO_id       | order        | 1:м       |
| order        | STO_id       | STO          | м:1       |
|              | auto_id      | auto         | м:1       |
|              | master_id    | master       | м:1       |
|              | order_id     | order_works  | 1:м       |
| master       | master_id    | order        | 1:м       |
|              | master_id    | master_works | 1:м       |
| master_works | master_id    | master       | м:1       |
|              | work_type_id | works        | м:1       |
| works        | work_type_id | master_works | 1:м       |
|              | work_type_id | order_works  | 1:м       |
| order_works  | work_type_id | works        | м:1       |
|              | order_id     | order        | м:1       |

