**Модель предметной области**
**диаграмме-классов**

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_ADVANCED/UML/uml_er.png)

**Диаграмма состояний**

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_ADVANCED/UML/uml_s.png)


@startuml
!theme plain
scale 1000 width

state Терминал {
[*] -> Временный_заказ 

Временный_заказ --> Создан: Клиент завершил формирование корзины
Создан --> Заказ_оплачен: Позиции заказа подтверждены


Временный_заказ: Добавить товар в корзину
Создан: Выбрать способ и время получения заказа
Заказ_оплачен: Оплатить заказ
Заказ_оплачен: Отменить заказ


}

state Производство {
  state Передан_в_производство
  [*] --> Передан_в_производство
  Передан_в_производство --> Приготовлен: Заказ приготовлен 

Передан_в_производство: Изменить статус заказа
Приготовлен: Изменить статус заказа
}


state Выдача {
  state Выдача_заказа
  [*] --> Выдача_заказа


Выдача_заказа: Изменить статус заказа
заказ_получен: Изменить статус заказа
Самоотказ: Изменить статус заказа

Выдача_заказа --> заказ_получен : Клиент забрал заказ
Выдача_заказа --> Самоотказ : Заказ не был получен клиентом в течение 3х часов
}

Заказ_оплачен --> Производство : оплата заказа завершена успешно

Приготовлен --> Выдача : передача заказа на доставку


Самоотказ --> [*] : Завершение сеанса

заказ_получен --> [*] : Завершение сеанса


Самоотказ --> База_данных : Добавление заказа в БД


заказ_получен --> База_данных : Добавление заказа в БД


Заказ_оплачен --> [*] : клиент не оплатил заказ в течение 2 минут, заказ удаляется


state База_данных {
  state Хранение_записи_в_бд
  [*] --> Хранение_записи_в_бд
  

Хранение_записи_в_бд: Вставить запись
Хранение_записи_в_бд: Удалить запись заказа через год

}
Хранение_записи_в_бд --> [*]
@enduml