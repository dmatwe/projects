**Модель предметной области**
**диаграмме-классов**

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_ADVANCED/UML/uml_er.png)

```json
@startuml
!theme plain
skinparam linetype ortho


Entity  Клиент {
  ФИО
  Номер Тел
  Кол-во баллов
  Добавить товар в корзину()
}


Entity  Заказ {
  Номер заказа
  Время заказа
  Время получения заказа
  Способ получения заказа 
  Статус заказа
  Изменить статус заказа()

}

Entity  Детали_оплаты_заказа {
  Номер заказа
  Сумма заказа
  Кол-во списанных баллов
  Кол-во начисленных баллов
  Время оплаты заказа
  Способ оплаты заказа
  Статус оплаты заказа
  Изменить способ оплаты заказа()
  Изменить кол-во баллов для списания()
  Изменить статус оплаты заказа()

}

Entity  Товар {
  Наименование
  Цена
}


Entity  Позиции_заказа {
  Номер заказа
  Товар
  Кол-во товаров
  Добаввить позицию()
  Убрать позицию()
}


Entity  Категории {
  Наименование категории
  Добаввить товар в категорию()
  Убрать товар из категории()
  Переместить товар из категории()
}

Entity  Комбобургер {
  Наименование категории
  Добаввить товар в категорию()
  Убрать товар из категории()
  Переместить товар из категории()
}


Entity  Список_ингредиентов_бургера {
  Ингредиент
  Кол-во ингедиента
  Позиция в бургере
  Добавить ингредиент()
  Удалить ингредиент()
  Изменить номер позицию()
}


Entity  Ингредиент {
  Наименование ингредиента
  Цена ингредиента
}


Entity  СМС_авторизации {
  Номер тел
  Статус авторазиции
  Способ авторазиции
  Время авторизации
  Изменить статус авторизации()
}


Клиент "1" --> "0..*" Заказ: Формирует
Заказ  *--  "1..*" Позиции_заказа
Позиции_заказа "1..*"  -->   "1..*" Товар:Добавить/Удалить позицию
Товар ---|> Категории
Комбобургер ---|> Товар
Комбобургер  *--  "1..*" Список_ингредиентов_бургера
Список_ингредиентов_бургера "1..*"  -->   "1..*" Ингредиент:Добавить/Удалить ингредиент
Заказ "1"  -->   "1" Детали_оплаты_заказа:Оплатить заказ
Клиент "1" --> "0..*" СМС_авторизации: Вводит код авторизации
@enduml
```

**Диаграмма состояний**

![Image alt](https://github.com/dmatwe/projects/blob/main/OTUS_SA_ADVANCED/UML/uml_s.png)

```json
@startuml
!theme plain
scale 1000 width

state Терминал {
[*] -> Временный_заказ 

Временный_заказ --> Создан: Клиент завершил формирование корзины
Создан --> Заказ_оплачен: Позиции заказа подтверждены


Временный_заказ: Добавить товар в корзину
Создан: Выбрать способ и время получения заказа
Заказ_оплачен: Оплатить заказ
Заказ_оплачен: Отменить заказ


}

state Производство {
  state Передан_в_производство
  [*] --> Передан_в_производство
  Передан_в_производство --> Приготовлен: Заказ приготовлен 

Передан_в_производство: Изменить статус заказа
Приготовлен: Изменить статус заказа
}


state Выдача {
  state Выдача_заказа
  [*] --> Выдача_заказа


Выдача_заказа: Изменить статус заказа
заказ_получен: Изменить статус заказа
Самоотказ: Изменить статус заказа

Выдача_заказа --> заказ_получен : Клиент забрал заказ
Выдача_заказа --> Самоотказ : Заказ не был получен клиентом в течение 3х часов
}

Заказ_оплачен --> Производство : оплата заказа завершена успешно

Приготовлен --> Выдача : передача заказа на доставку


Самоотказ --> [*] : Завершение сеанса

заказ_получен --> [*] : Завершение сеанса


Самоотказ --> База_данных : Добавление заказа в БД


заказ_получен --> База_данных : Добавление заказа в БД


Заказ_оплачен --> [*] : клиент не оплатил заказ в течение 2 минут, заказ удаляется


state База_данных {
  state Хранение_записи_в_бд
  [*] --> Хранение_записи_в_бд
  

Хранение_записи_в_бд: Вставить запись
Хранение_записи_в_бд: Удалить запись заказа через год

}
Хранение_записи_в_бд --> [*]
@enduml
```